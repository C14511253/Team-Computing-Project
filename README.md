#pragma config(Sensor, S1,     lightSensor,    sensorLightActive)
#pragma config(Sensor, S2,     sonarSensor,    sensorSONAR)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/* 
-----------------------------------
Team Computing Project CA
Luke Griffin and Connor Heaphy
Started: 04/03/2015
Finished:
-----------------------------------
*/

void object_1(int line_count);
void turn_left(void);


//MotorB is right wheel 
//MotorC is left wheel


task main()
{
	int line_count = 0;
	
	
	//When robot senses an object 
	while ( SensorValue(sonarSensor) > 25 ) 
	{
	 
	  object_1(line_count); 	//Traversing lines

	  turn_left();						//Turns the robot left
	   

	}//End while()
 
}//End main()


//Implementing function to traverse lines, count them and display on screen
void object_1(int line_count) 
{
	
	//Counts 4 lines to the first block
	while(line_count != 3)
	{
	    motor[motorB] = 50;
	    motor[motorC] = 50;
	    
	    //If senses a black line
	    if(SensorValue(lightSensor) < 45)
	    {   
	        wait1Msec(50);
	        line_count = line_count + 1;
	        
	        nxtDisplayBigStringAt(25, 25, "%d", line_count);
	  			nxtDisplayCenteredTextLine(1, "The Line Count");
	  			nxtDisplayCenteredTextLine(2, "is");
	  			
	    }//End if
	
	    
	}//End While

	
}//End implement object1



//Turn_left() turns the robot left
void turn_left(void)
{
	nMotorEncoder[motorB] = 0;
	nMotorEncoder[motorC] = 0;
	
	while(nMotorEncoder[motorB] < 140)
	{
		motor[motorB] = 50;
		motor[motorC] = 50;
	}//End while()
	
	nMotorEncoder[motorB] = 0;
	nMotorEncoder[motorC] = 0;
	
	while(nMotorEncoder[motorC] < 360)
	{
		motor[motorC] = 50;
		motor[motorB] = 0;
	}//End while()
	
}//End turn_left
	
